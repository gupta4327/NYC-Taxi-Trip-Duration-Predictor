schema: '2.0'
stages:
  make_dataset:
    cmd: python .\src\data\make_dataset.py \raw\train.csv \interim\
    deps:
    - path: .\data\raw\train.csv
      hash: md5
      md5: e59c291a4b1c640f1dab33b89daa22e1
      size: 200589097
    - path: .\src\data\make_dataset.py
      hash: md5
      md5: 4a538f4c7241c772f1cac00bfd9cd78a
      size: 7143
    params:
      params.yaml:
        make_dataset.dropoff_latitude_lowlimit: 40.637044
        make_dataset.dropoff_latitude_uplimit: 40.855256
        make_dataset.dropoff_longitude_lowlimit: -74.035735
        make_dataset.dropoff_longitude_uplimit: -73.770272
        make_dataset.pickup_latitude_lowlimit: 40.637044
        make_dataset.pickup_latitude_uplimit: 40.855256
        make_dataset.pickup_longitude_lowlimit: -74.035735
        make_dataset.pickup_longitude_uplimit: -73.770272
        make_dataset.seed: 24
        make_dataset.test_per: 0.2
  traindata_build_features_train:
    cmd: python .\src\features\build_features.py \interim\train_data.csv \processed\
      \models\loc_kmeans.pkl
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 5b67e42828dae7a7c26706b5cf9e9270.dir
      size: 193972996
      nfiles: 4
    - path: .\src\features\build_features.py
      hash: md5
      md5: 4a354dcf76d032155720182cbd313afb
      size: 7322
  testdata_build_features:
    cmd: python .\src\features\build_features.py \interim\test_data.csv \processed\
      \models\loc_kmeans.pkl
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 5b67e42828dae7a7c26706b5cf9e9270.dir
      size: 193972996
      nfiles: 4
    - path: .\src\features\build_features.py
      hash: md5
      md5: 4a354dcf76d032155720182cbd313afb
      size: 7322
  hyperparameter_packaging:
    cmd: python .\src\models\hyperparameters.py
    deps:
    - path: .\src\models\hyperparameters.py
      hash: md5
      md5: 87f017a36ef0696d51e3e457a84aed5d
      size: 2012
  train_model:
    cmd: python .\src\models\train_model.py \processed\train_data.csv \processed\test_data.csv
      \models\hyperparameters.pkl
    deps:
    - path: .\data\processed\
      hash: md5
      md5: 42252d50fa138c2da2af82f9f3454401.dir
      size: 452705173
      nfiles: 5
    - path: .\models\
      hash: md5
      md5: eee672d671d1683f185a4b2e0b8f5044.dir
      size: 25812555
      nfiles: 9
    - path: .\src\models\train_model.py
      hash: md5
      md5: 99b2b659d32372ccfc970f47cf4115e5
      size: 12164
    params:
      params.yaml:
        train_model.features:
        - vendor_id
        - pickup_latitude
        - pickup_longitude
        - dropoff_latitude
        - dropoff_longitude
        - pickup_weekday
        - pickup_hour
        - store_and_fwd_flag
        - pickup_cluster_label
        - dropoff_cluster_label
        - trip_distance
        - day_phase
        - trip_duration
        train_model.model: XtremeGradientBoost
        train_model.ohe_features:
        - vendor_id
        - pickup_weekday
        - day_phase
        - store_and_fwd_flag
        train_model.seed: 26
    outs:
    - path: dvclive
      hash: md5
      md5: 91f82abc29722c992f8bc105d8586af0.dir
      size: 1653
      nfiles: 10
  visualize:
    cmd: python .\src\visualization\visualize.py \processed\train_data.csv \processed\test_data.csv
      \models\trained_models\ \reports\figures\
    deps:
    - path: .\data\processed\
      hash: md5
      md5: 42252d50fa138c2da2af82f9f3454401.dir
      size: 452705173
      nfiles: 5
    - path: .\models\trained_models\
      hash: md5
      md5: 4b665b667aa97678a75da5c596cf67c6.dir
      size: 734854
      nfiles: 3
    - path: .\reports\figures\
      hash: md5
      md5: 60a168857dab903c02c09802aece6b08.dir
      size: 72169
      nfiles: 5
    - path: .\src\visualization\visualize.py
      hash: md5
      md5: af4452390e6a15dd628c8795c7ea43bd
      size: 9985

schema: '2.0'
stages:
  make_dataset:
    cmd: python .\src\data\make_dataset.py \raw\train.csv \interim\
    deps:
    - path: .\data\raw\train.csv
      hash: md5
      md5: e59c291a4b1c640f1dab33b89daa22e1
      size: 200589097
    - path: .\src\data\make_dataset.py
      hash: md5
      md5: 23722e94d706734e9d759c2f093e18b0
      size: 6817
    params:
      params.yaml:
        make_dataset.dropoff_latitude_lowlimit: 40.637044
        make_dataset.dropoff_latitude_uplimit: 40.855256
        make_dataset.dropoff_longitude_lowlimit: -74.035735
        make_dataset.dropoff_longitude_uplimit: -73.770272
        make_dataset.pickup_latitude_lowlimit: 40.637044
        make_dataset.pickup_latitude_uplimit: 40.855256
        make_dataset.pickup_longitude_lowlimit: -74.035735
        make_dataset.pickup_longitude_uplimit: -73.770272
        make_dataset.seed: 24
        make_dataset.test_per: 0.3
  traindata_build_features_train:
    cmd: python .\src\features\build_features.py \interim\train_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 4a4208836004ee99b5b8b75b9ed809fb.dir
      size: 193972832
      nfiles: 3
    - path: .\src\features\build_features.py
      hash: md5
      md5: 01c6dd38dd4d08d48caa539d0462d666
      size: 10156
    params:
      params.yaml:
        build_features.K: 5
        build_features.seed: 26
  testdata_build_features:
    cmd: python .\src\features\build_features.py \interim\test_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 4a4208836004ee99b5b8b75b9ed809fb.dir
      size: 193972832
      nfiles: 3
    - path: .\src\features\build_features.py
      hash: md5
      md5: 01c6dd38dd4d08d48caa539d0462d666
      size: 10156
  hyperparameter_packaging:
    cmd: python .\src\models\hyperparameters.py
    deps:
    - path: .\src\models\hyperparameters.py
      hash: md5
      md5: 07bdf204ee1c86b11838c42b38be0143
      size: 2565
  train_model:
    cmd: python .\src\models\train_model.py \processed\train_data.csv \processed\test_data.csv
      \models\hyperparameters.pkl
    deps:
    - path: .\data\processed\
      hash: md5
      md5: 15dc05e8eaad92d7710b4d20e988fa64.dir
      size: 502873708
      nfiles: 5
    - path: .\models\
      hash: md5
      md5: 541d08b332474feda77fdd72896e7f3b.dir
      size: 33885219
      nfiles: 5
    - path: .\src\models\train_model.py
      hash: md5
      md5: 61658735499c1ada303b0c049fea579d
      size: 13071
    params:
      params.yaml:
        train_model.features:
        - vendor_id
        - pickup_latitude
        - pickup_longitude
        - dropoff_latitude
        - dropoff_longitude
        - pickup_weekday
        - pickup_hour
        - store_and_fwd_flag
        - pickup_cluster_label
        - dropoff_cluster_label
        - trip_distance
        - day_phase
        - trip_duration
        train_model.model: RandomForest
        train_model.ohe_features:
        - vendor_id
        - pickup_weekday
        - day_phase
        - store_and_fwd_flag
        train_model.seed: 26
    outs:
    - path: dvclive
      hash: md5
      md5: ea720d87ecab01172151f1bc8760a7ec.dir
      size: 536
      nfiles: 10
  visualize:
    cmd: python .\src\visualization\visualize.py \processed\train_data.csv \processed\test_data.csv
      \models\trained_models\ \reports\figures\
    deps:
    - path: .\data\processed\
      hash: md5
      md5: 15dc05e8eaad92d7710b4d20e988fa64.dir
      size: 502873708
      nfiles: 5
    - path: .\models\trained_models\
      hash: md5
      md5: a506f6f2e5637ade08ffe2c645f08333.dir
      size: 25833826
      nfiles: 1
    - path: .\reports\figures\
      hash: md5
      md5: 103b2114a0642098cbacc2b60ab297c7.dir
      size: 69762
      nfiles: 5
    - path: .\src\visualization\visualize.py
      hash: md5
      md5: d84fed5d7ea0e319cb4dd9c159eaad65
      size: 8573

schema: '2.0'
stages:
  make_dataset:
    cmd: python .\src\data\make_dataset.py \raw\train.csv \interim\
    deps:
    - path: .\data\raw\train.csv
      hash: md5
      md5: e59c291a4b1c640f1dab33b89daa22e1
      size: 200589097
    - path: .\src\data\make_dataset.py
      hash: md5
      md5: 23722e94d706734e9d759c2f093e18b0
      size: 6817
    params:
      params.yaml:
        make_dataset.dropoff_latitude_lowlimit: 40.637044
        make_dataset.dropoff_latitude_uplimit: 40.855256
        make_dataset.dropoff_longitude_lowlimit: -74.035735
        make_dataset.dropoff_longitude_uplimit: -73.770272
        make_dataset.pickup_latitude_lowlimit: 40.637044
        make_dataset.pickup_latitude_uplimit: 40.855256
        make_dataset.pickup_longitude_lowlimit: -74.035735
        make_dataset.pickup_longitude_uplimit: -73.770272
        make_dataset.seed: 24
        make_dataset.test_per: 0.3
  traindata_build_features_train:
    cmd: python .\src\features\build_features.py \interim\train_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: df06dc77d97fe2cb87c8a2b34b6433a4.dir
      size: 58191523
      nfiles: 2
    - path: .\src\features\build_features.py
      hash: md5
      md5: f2f28f2a7378dbf09308650a05cb2510
      size: 10201
    params:
      params.yaml:
        build_features.K: 5
        build_features.seed: 26
  testdata_build_features:
    cmd: python .\src\features\build_features.py \interim\test_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: df06dc77d97fe2cb87c8a2b34b6433a4.dir
      size: 58191523
      nfiles: 2
    - path: .\src\features\build_features.py
      hash: md5
      md5: f2f28f2a7378dbf09308650a05cb2510
      size: 10201
  hyperparameter_packaging:
    cmd: python .\src\models\hyperparameters.py
    deps:
    - path: .\src\models\hyperparameters.py
      hash: md5
      md5: 07bdf204ee1c86b11838c42b38be0143
      size: 2565
  train_model:
    cmd: python .\src\models\train_model.py \processed\train_data.csv \processed\test_data.csv
      \models\hyperparameters.pkl
    deps:
    - path: .\data\processed\
      hash: md5
      md5: 7155b22db623226c51646d9b12ef3516.dir
      size: 502873708
      nfiles: 5
    - path: .\models\
      hash: md5
      md5: 0c6335f9011898cff9be10ee37849ee8.dir
      size: 45136920
      nfiles: 6
    - path: .\src\models\train_model.py
      hash: md5
      md5: 59c48ec664e530dde61c5995f10687fb
      size: 13072
    params:
      params.yaml:
        train_model.features:
        - vendor_id
        - pickup_latitude
        - pickup_longitude
        - dropoff_latitude
        - dropoff_longitude
        - pickup_weekday
        - pickup_hour
        - store_and_fwd_flag
        - pickup_cluster_label
        - dropoff_cluster_label
        - trip_distance
        - day_phase
        - trip_duration
        train_model.model: RandomForest
        train_model.ohe_features:
        - vendor_id
        - pickup_weekday
        - day_phase
        - store_and_fwd_flag
        train_model.seed: 26
    outs:
    - path: dvclive
      hash: md5
      md5: 966e22cb47450997729306b38912d385.dir
      size: 540
      nfiles: 10
  visualize:
    cmd: python .\src\visualization\visualize.py \processed\train_data.csv \processed\test_data.csv
      \models\trained_models\ \reports\figures\
    deps:
    - path: .\data\processed\
      hash: md5
      md5: 7155b22db623226c51646d9b12ef3516.dir
      size: 502873708
      nfiles: 5
    - path: .\models\trained_models\
      hash: md5
      md5: 87d743d81ee4cc301e8430516f731912.dir
      size: 18542619
      nfiles: 1
    - path: .\reports\figures\
      hash: md5
      md5: 816e6a49818890690746049c10bc054b.dir
      size: 68160
      nfiles: 5
    - path: .\src\visualization\visualize.py
      hash: md5
      md5: e97b81968190216c2b4973e802f3d9b3
      size: 9090

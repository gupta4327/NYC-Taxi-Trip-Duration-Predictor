schema: '2.0'
stages:
  make_dataset:
    cmd: python .\src\data\make_dataset.py \raw\train.csv \interim\
    deps:
    - path: .\data\raw\train.csv
      hash: md5
      md5: e59c291a4b1c640f1dab33b89daa22e1
      size: 200589097
    - path: .\src\data\make_dataset.py
      hash: md5
      md5: 2e08960acc5455cfea4556df18790c38
      size: 6329
    params:
      params.yaml:
        make_dataset.seed: 24
        make_dataset.test_per: 0.3
  build_features:
    cmd: python .\src\features\build_features.py \interim\train_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 7133592d47f19192d9988fb211c446f1.dir
      size: 12207509
      nfiles: 3
    - path: .\src\features\build_features.py
      hash: md5
      md5: bac43ca40d8e4b7cb99fb1f2b96311f5
      size: 9390
    params:
      params.yaml:
        build_features.K: 5
        build_features.seed: 25
  build_features_train:
    cmd: python .\src\features\build_features.py \interim\train_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 12535478c149d36822afa94f3226e176.dir
      size: 12207509
      nfiles: 3
    - path: .\src\features\build_features.py
      hash: md5
      md5: 2e09b5d0d617a0d2cc43a8c1003d1502
      size: 9355
    params:
      params.yaml:
        build_features.K: 5
        build_features.seed: 26
  build_features_test:
    cmd: python .\src\features\build_features.py \interim\test_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 12535478c149d36822afa94f3226e176.dir
      size: 12207509
      nfiles: 3
    - path: .\src\features\build_features.py
      hash: md5
      md5: 2e09b5d0d617a0d2cc43a8c1003d1502
      size: 9355
    params:
      params.yaml:
        build_features.K: 5
        build_features.seed: 26
  train_model:
    cmd: python .\src\models\train_model.py \processed\train_data.csv
    deps:
    - path: .\data\processed\
      hash: md5
      md5: acf9444126608d444dde52d159cfc09e.dir
      size: 16009638
      nfiles: 3
    - path: .\src\models\train_model.py
      hash: md5
      md5: 1df3f6b57f276cb06634a9b594fb7cd8
      size: 7127
    params:
      params.yaml:
        train_model.features:
        - vendor_id
        - pickup_latitude
        - pickup_longitude
        - dropoff_latitude
        - dropoff_longitude
        - pickup_weekday
        - pickup_hour
        - store_and_fwd_flag
        - pickup_cluster_label
        - dropoff_cluster_label
        - trip_distance
        - day_phase
        - trip_duration
        train_model.hyperparameters:
          max_depth: 10
          n_estimators: 20
        train_model.model: RandomForest
        train_model.ohe_features:
        - vendor_id
        - pickup_weekday
        - day_phase
        - store_and_fwd_flag
  visualize:
    cmd: python .\src\visualization\visualize.py \processed\train_data.csv \processed\test_data.csv
      \models\trained_pipeline.pkl
    deps:
    - path: .\data\processed\
      hash: md5
      md5: acf9444126608d444dde52d159cfc09e.dir
      size: 16009638
      nfiles: 3
    - path: .\models\trained_pipeline.pkl
      hash: md5
      md5: e5133763ce7470edd3b7adb1a74bb80d
      size: 2078632
    - path: .\src\visualization\visualize.py
      hash: md5
      md5: 560b371ef2479917a1b574666d5efd2c
      size: 5052
    outs:
    - path: dvclive
      hash: md5
      md5: 898ec27b2d4a4e36492f0c613993596b.dir
      size: 35099
      nfiles: 11
  traindata_build_features_train:
    cmd: python .\src\features\build_features.py \interim\train_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 12535478c149d36822afa94f3226e176.dir
      size: 12207509
      nfiles: 3
    - path: .\src\features\build_features.py
      hash: md5
      md5: 4c79abb0d5c84be576483bbdd9abd2a3
      size: 9472
    params:
      params.yaml:
        build_features.K: 5
        build_features.seed: 26
  testdata_build_features:
    cmd: python .\src\features\build_features.py \interim\test_data.csv \processed\
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 12535478c149d36822afa94f3226e176.dir
      size: 12207509
      nfiles: 3
    - path: .\src\features\build_features.py
      hash: md5
      md5: 4c79abb0d5c84be576483bbdd9abd2a3
      size: 9472

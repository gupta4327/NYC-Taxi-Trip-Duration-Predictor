schema: '2.0'
stages:
  make_dataset:
    cmd: python .\src\data\make_dataset.py \raw\train.csv \interim\
    deps:
    - path: .\data\raw\train.csv
      hash: md5
      md5: e59c291a4b1c640f1dab33b89daa22e1
      size: 200589097
    - path: .\src\data\make_dataset.py
      hash: md5
      md5: 4a538f4c7241c772f1cac00bfd9cd78a
      size: 7143
    params:
      params.yaml:
        make_dataset.dropoff_latitude_lowlimit: 40.637044
        make_dataset.dropoff_latitude_uplimit: 40.855256
        make_dataset.dropoff_longitude_lowlimit: -74.035735
        make_dataset.dropoff_longitude_uplimit: -73.770272
        make_dataset.pickup_latitude_lowlimit: 40.637044
        make_dataset.pickup_latitude_uplimit: 40.855256
        make_dataset.pickup_longitude_lowlimit: -74.035735
        make_dataset.pickup_longitude_uplimit: -73.770272
        make_dataset.seed: 24
        make_dataset.test_per: 0.2
  traindata_build_features_train:
    cmd: python .\src\features\build_features.py \interim\train_data.csv \processed\
      \models\loc_kmeans.pkl
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 5b67e42828dae7a7c26706b5cf9e9270.dir
      size: 193972996
      nfiles: 4
    - path: .\src\features\build_features.py
      hash: md5
      md5: 4a354dcf76d032155720182cbd313afb
      size: 7322
  testdata_build_features:
    cmd: python .\src\features\build_features.py \interim\test_data.csv \processed\
      \models\loc_kmeans.pkl
    deps:
    - path: .\data\interim\
      hash: md5
      md5: 5b67e42828dae7a7c26706b5cf9e9270.dir
      size: 193972996
      nfiles: 4
    - path: .\src\features\build_features.py
      hash: md5
      md5: 4a354dcf76d032155720182cbd313afb
      size: 7322
  hyperparameter_packaging:
    cmd: python .\src\models\hyperparameters.py
    deps:
    - path: .\src\models\hyperparameters.py
      hash: md5
      md5: 8c1522201133f38d444b41e02535d09f
      size: 2552
  train_model:
    cmd: python .\src\models\train_model.py \processed\train_data.csv \processed\test_data.csv
      \models\hyperparameters.pkl
    deps:
    - path: .\data\processed\
      hash: md5
      md5: 42252d50fa138c2da2af82f9f3454401.dir
      size: 452705173
      nfiles: 5
    - path: .\models\
      hash: md5
      md5: 9fa7522fc3c30c9b97c0c1723166a0d8.dir
      size: 42972424
      nfiles: 8
    - path: .\src\models\train_model.py
      hash: md5
      md5: a870b4c5696e0ecd2765e86bb62c8d12
      size: 11859
    params:
      params.yaml:
        train_model.features:
        - vendor_id
        - pickup_latitude
        - pickup_longitude
        - dropoff_latitude
        - dropoff_longitude
        - pickup_weekday
        - pickup_hour
        - store_and_fwd_flag
        - pickup_cluster_label
        - dropoff_cluster_label
        - trip_distance
        - day_phase
        - trip_duration
        train_model.model: RandomForest
        train_model.ohe_features:
        - vendor_id
        - pickup_weekday
        - day_phase
        - store_and_fwd_flag
        train_model.seed: 26
    outs:
    - path: dvclive
      hash: md5
      md5: d3703f9ee9b238072560a63b138f3380.dir
      size: 538
      nfiles: 10
  visualize:
    cmd: python .\src\visualization\visualize.py \processed\train_data.csv \processed\test_data.csv
      \models\trained_models\ \reports\figures\
    deps:
    - path: .\data\processed\
      hash: md5
      md5: 42252d50fa138c2da2af82f9f3454401.dir
      size: 452705173
      nfiles: 5
    - path: .\models\trained_models\
      hash: md5
      md5: 428b3f1ea50fefb226bf0ecb8cfad32b.dir
      size: 44671
      nfiles: 2
    - path: .\reports\figures\
      hash: md5
      md5: 7848c5ca0996429b2238c715894c9919.dir
      size: 65008
      nfiles: 5
    - path: .\src\visualization\visualize.py
      hash: md5
      md5: af4452390e6a15dd628c8795c7ea43bd
      size: 9985
